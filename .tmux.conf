#===============<<<      Default Key Bind        >>>===============================
#
# [prefix] ? ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ä¸€è¦§
#
## ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦(ã‚¿ãƒ–)
# [prefix] c ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½œæˆ
# [prefix] , ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®åå‰å¤‰æ›´
# [prefix] . ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½ç½®ã‚’ç§»å‹•
# [prefix] w ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸€è¦§é¸æŠ
# [prefix] & ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ç ´æ£„
# [prefix] n æ¬¡ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ç§»å‹•
# [prefix] p å‰ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ç§»å‹•
# [prefix] 0-9 è©²å½“ç•ªå·ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ç§»å‹•
# [prefix] l ä»¥å‰ã®ã‚¦ã‚£ãƒ‰ã‚¦ã¸ç§»å‹•
#
## ã‚»ãƒƒã‚·ãƒ§ãƒ³
# [prefix] s ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¸€è¦§é¸æŠ
# [prefix] d ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰é›¢è„±(ãƒ‡ã‚¿ãƒƒãƒ)
# [prefix] $ ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®åå‰å¤‰æ›´
# [prefix] C-s save session, window, pane
# [prefix] C-r restor window
#
## ãƒšã‚¤ãƒ³
# [prefix] H ãƒšã‚¤ãƒ³åŒºåˆ‡ã‚Šã‚’å·¦ã«ç§»å‹•(æ‹¡å¤§/ç¸®å°)
# [prefix] L ãƒšã‚¤ãƒ³åŒºåˆ‡ã‚Šã‚’å³ã«ç§»å‹•(æ‹¡å¤§/ç¸®å°)
# [prefix] J ãƒšã‚¤ãƒ³åŒºåˆ‡ã‚Šã‚’ä¸‹ã«ç§»å‹•(æ‹¡å¤§/ç¸®å°)
# [prefix] D ãƒšã‚¤ãƒ³åŒºåˆ‡ã‚Šã‚’ä¸Šã«ç§»å‹•(æ‹¡å¤§/ç¸®å°)
# [prefix] } ã‚«ãƒ¬ãƒ³ãƒˆãƒšã‚¤ãƒ³ã‚’ç§»å‹•(clockwise)
# [prefix] { ã‚«ãƒ¬ãƒ³ãƒˆãƒšã‚¤ãƒ³ã‚’ç§»å‹•(c-clockwise)
# [prefix] ! ãƒšã‚¤ãƒ³ã‚’è§£é™¤ã—ã¦ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦åŒ–
#
## ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰
# [prefix] v ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
# [prefix] [ ã‚³ãƒ”ãƒ¼/ãƒšãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰é–‹å§‹
# [prefix] z ã‚«ãƒ¬ãƒ³ãƒˆPaneã‚’æœ€å¤§åŒ–/æˆ»ã™
##
# ctrl+Z tmuxã‚’ä¸€æ™‚ä¸­æ–­ â€» fgã§å¾©å¸°
#===============<<<      Key Bind        >>>===============================

# reload .tmux.conf ([prefix] r)
bind r source-file ~/.tmux.conf \; display "loaded!"
# set prefix key
set -g prefix C-g
# set prefix for linux(ãƒªãƒ¢ãƒ¼ãƒˆä¸Š)
if-shell 'test "$(uname -s)" = Linux' "set -g prefix C-g \; unbind C-b"
# unbind prefix key
unbind C-b
# toggle pane by same as prefix key
bind C-t last-pane
if-shell 'test "$(uname -s)" = Linux' "bind C-g last-pane \; unbind C-b"

# change pane awesome vim keybind
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r C-h select-pane -L
bind -r C-j select-pane -D
bind -r C-k select-pane -U
bind -r C-l select-pane -R
bind -r C-n next-window
#bind -r C-h select-window -t :-
#bind -r C-l select-window -t :+

# Vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ãƒªã‚µã‚¤ã‚ºã™ã‚‹
bind -r H resize-pane -L 5
bind -r < resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5
bind -r > resize-pane -R 5

# split pane by the vertical by `|`
bind | split-window -h

# split pane by the horizontal by `-`
bind - split-window -v

# aggressive resize-----
# é•ã†ãƒã‚·ãƒ³ã‹ã‚‰æ¥ç¶šã—ãŸæ™‚ã®ãƒªã‚µã‚¤ã‚º
# setw -g aggressive-resize on
#

set -sg escape-time 1      # degree delay of key stroke
set -g base-index 1        # start index of window from 1 rather than 0
setw -g pane-base-index 1  # start index of pane from 1 rather than 0
bind C-a send-prefix       # send C-a inner plugram of tmux by C-a*2


#===============<<<      Copy Mode        >>>===============================

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«é€£æºã—ãªã„å ´åˆã¯ä¸‹è¨˜ã‚’ç¢ºèª
# $ echo $DISPLAY -> è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹?
# $ xeyes         -> ç›®ç‰ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã™ã‚‹ã‹?

# vi-Copy-mode
set-window-option -g mode-keys vi
# Prefix+v ã§ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
bind-key v copy-mode
bind-key -T copy-mode-vi v send-keys -X begin-selection

# ãƒã‚¤ãƒ³ãƒ‰è¨­å®š
bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'win32yank.exe -i'

# ===============<<< ãƒã‚¦ã‚¹è¨­å®š > {{{
# set-option -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"
# ç”»é¢ãƒ‰ãƒ©ãƒƒã‚°æ™‚ã«ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹
# ãƒã‚¦ã‚¹ã§ãƒšã‚¤ãƒ³ã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
# ãƒã‚¦ã‚¹ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
# ãƒã‚¦ã‚¹ã§ãƒªã‚µã‚¤ã‚ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
#}}}


#===============<<<      Visual        >>>===============================
# 256è‰²ç«¯æœ«ã‚’ä½¿ç”¨ã™ã‚‹
# ä¸‹è¨˜ãªãã¦ã‚‚.bashrcã«`export TERM=xte3rm-256color`ã‚’æŒ‡å®šã§
# 256è‰²è¡¨ç¤ºå¯èƒ½
# $ echo $TERM
# xterm-256coor
# ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OK`screen`ã¨è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆ16è‰²
##################
set -g default-terminal "screen-256color"
set-option -ga terminal-overrides ',xterm-256color:Tc'
#-----focus env----------
# set-option -g focus-events on

#-----active window------
setw -g window-status-current-style bg="green","bright",fg="white"

#-----pane border------
set -g pane-border-style bg="white",fg="black"

#-----active pane------
set -g pane-active-border-style bg="white",fg="black"

#-----visual notification------
setw -g monitor-activity on
set -g visual-activity on

#-----status bar color------
set -g status-fg white
set -g status-bg colour238
set-option -g status-bg "colour238"

#-----status bar position------
set -g status-position top
#set -g status-position bottom

#-----left of status line------
set -g status-left-length 40
set -g status-left '#[fg=green]   Session: #S #[fg=yellow]#I #[fg=cyan]#P :   #[fg=white,bg=black] #H #[fg=white]'
# Prefixã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸéš›ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã‚’åè»¢ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
# http://qiita.com/dtan4/items/363e92525e7c5a16f3fc
set-option -g status-left '#[fg=cyan,bg=#303030]#{?client_prefix,#[reverse],} #H[#S] #[default]'

#-----right of status line------
# [battery](https://github.com/tmux-plugins/tmux-battery)
set -g status-right "#{battery_icon} #{battery_percentage}#[bg=colour238]  #[fg=white]ğŸ“†  %Y/%m/%d(%a)  ğŸ•‘   #[fg=color46,bold]%H:%M     "

# #-----window list------
setw -g window-status-style bg="default","dim",fg="white"

## ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚¹ãƒˆã®ä½ç½®ã‚’ä¸­å¿ƒå¯„ã›ã«ã™ã‚‹
set -g status-justify centre
# window-status ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ã€‚
set-window-option -g window-status-format " #I: #W "
# ã‚«ãƒ¬ãƒ³ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã® window-status ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹
set-window-option -g window-status-current-format "#[fg=colour255,bg=colour8,bold] #I: #W  #[default]"

#===============<<<      Static        >>>===============================
# Command Sequence for Nested Tmux Sessions
bind-key a send-prefix
# set default shell
set-option -g default-shell /bin/bash
set -g default-command /bin/bash
# limit for window history
set-option -g history-limit 5000
 
# #===============<<<      tpm(plugin manager)        >>>===============================
# # [tmux pluginç®¡ç† tpm](https://qiita.com/izumin5210/items/5b7f4c01fb6fe6064a05)
# # [prefix] I install
set -g @tpm_plugins '              \
        tmux-plugins/tpm                 \
        tmux-plugins/tmux-resurrect      \
        tmux-plugins/tmux-open           \
        tmux-plugins/tmux-battery        \
        '
 
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-processes 'irb pry "~rails server" "~rails console"'
 
run-shell '~/.tmux/plugins/tpm/tpm'


